<div class="turnos-container">
  <header>
    <h2>Generaci√≥n de Turnos</h2> 
    <p>Usuario: <strong>{{ usuario }}</strong></p>
  </header>

  <section class="formulario">
    <div class="input-row">
        <input type="text" placeholder="Comercio" /> 
        <input type="text" [(ngModel)]="idServicio" placeholder="Servicio ID" />
    </div>

    <div class="input-row">
        <label>Fecha Inicial:</label>
        <input type="date" [(ngModel)]="fechaInicio" />
        
        <label>Fecha Final:</label>
        <input type="date" [(ngModel)]="fechaFin" />
    </div>

    <button (click)="generarTurnos()" [disabled]="!fechaInicio || !fechaFin || !idServicio || cargando">
      <span *ngIf="!cargando">Generar</span>
      <span *ngIf="cargando">Generando...</span>
    </button>
  </section>

  <hr> 
  
  <section class="lista-turnos">
    <h3>Turnos Generados</h3>
    
    <!-- Mensaje de respuesta del servidor -->
    <div *ngIf="mensaje" [class]="hasError ? 'mensaje-error' : 'mensaje-exito'">
      {{ mensaje }}
    </div>
    
    <table *ngIf="turnos.length > 0">
      <thead>
        <tr>
          <th>Comercio</th>
          <th>Servicio</th>
          <th>Fecha Turno</th>
          <th>Hora Inicio</th>
          <th>Hora Fin</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let t of turnos">
          <td>{{ t.nombreComercio }}</td>
          <td>{{ t.nombreServicio }}</td>
          <td>{{ t.fecha | date:'dd/MM/yyyy' }}</td>
          
          <td>{{ t.horaInicio | date:'HH:mm' }}</td>
          <td>{{ t.horaFin | date:'HH:mm' }}</td>
        </tr>
      </tbody>
    </table>
    
    <div *ngIf="cargando" class="mensaje-cargando">
      <p>Generando turnos, por favor espere...</p>
    </div>
    
    <p *ngIf="!turnosGenerados && !cargando">Introduce fechas y haz clic en Generar.</p>
    <p *ngIf="turnos.length === 0 && turnosGenerados && !cargando && !hasError">No hay turnos disponibles para el rango seleccionado.</p>
  </section>
</div>